# 智能锁测损功能测试系统

一个专业的智能锁耐久性测试系统，用于执行长时间或高频率的开锁测试，验证智能锁组件的耐用性和性能表现。

## 功能特性

### 🔧 测试控制
- **多种测试模式**：按次数、按时间、连续测试
- **灵活配置**：可设置测试间隔、目标次数/时长
- **实时控制**：支持开始、暂停、停止、继续操作
- **多锁型号支持**：可配置不同智能锁型号的测试参数

### 📊 数据记录与分析
- **详细记录**：每次开锁操作的时间、结果、响应时间
- **实时监控**：测试进度、成功率、性能指标实时显示
- **数据可视化**：响应时间趋势图、成功率变化、故障分析图表
- **组件健康监控**：跟踪各组件的健康状态和维护需求

### 📈 结果分析
- **性能趋势分析**：响应时间和成功率的变化趋势
- **故障类型统计**：电机、传感器、通信等故障分类
- **组件健康评估**：基于使用次数的组件健康度评分
- **维护建议**：根据测试结果提供维护建议

### 📋 历史管理
- **测试历史查看**：完整的测试记录管理
- **数据导出**：支持CSV、JSON、Excel格式导出
- **搜索过滤**：按状态、时间、型号等条件筛选
- **批量操作**：支持批量导出和删除

### ⚙️ 系统设置
- **测试参数配置**：默认测试模式、间隔、阈值等
- **硬件配置管理**：智能锁型号、连接参数设置
- **告警设置**：故障、性能、维护提醒配置
- **数据管理**：自动备份、数据保留策略

## 技术架构

### 前端技术栈
- **React 18** - 现代化用户界面框架
- **React Router** - 单页应用路由管理
- **Tailwind CSS** - 实用优先的CSS框架
- **Recharts** - 数据可视化图表库
- **Lucide React** - 现代化图标库
- **Vite** - 快速构建工具

### 后端技术栈
- **Node.js** - JavaScript运行时环境
- **Express.js** - Web应用框架
- **SQLite3** - 轻量级数据库
- **CORS** - 跨域资源共享支持

### 数据库设计
- **test_sessions** - 测试会话表
- **test_records** - 详细测试记录表
- **component_health** - 组件健康状态表
- **system_settings** - 系统配置表

## 快速开始

### 环境要求
- Node.js 16.0 或更高版本
- npm 或 yarn 包管理器

### 安装步骤

1. **安装依赖**
```bash
npm install
```

2. **启动开发服务器**
```bash
# 启动前端开发服务器 (端口 3003)
npm run dev

# 启动后端API服务器 (端口 3004)
npm run start
```

3. **访问应用**
- 前端界面：http://localhost:3003
- API接口：http://localhost:3004

### 生产部署

1. **构建前端**
```bash
npm run build
```

2. **启动生产服务器**
```bash
npm run start
```

## 使用指南

### 1. 配置测试参数
1. 进入「测试设置」页面
2. 配置智能锁型号和连接参数
3. 设置默认测试参数和告警阈值
4. 保存设置

### 2. 创建测试任务
1. 进入「测试控制」页面
2. 选择测试模式（按次数/按时间/连续）
3. 设置目标参数和测试间隔
4. 选择智能锁型号和测试类型
5. 点击「开始测试」

### 3. 监控测试进度
1. 在「仪表板」查看实时测试状态
2. 观察响应时间趋势和成功率变化
3. 查看实时日志和统计数据

### 4. 分析测试结果
1. 进入「测试结果」页面
2. 查看详细的性能分析图表
3. 分析故障类型和组件健康状态
4. 根据建议制定维护计划

### 5. 管理历史数据
1. 进入「测试历史」页面
2. 搜索和筛选历史测试记录
3. 导出需要的测试数据
4. 删除过期的测试记录

## API 接口

### 测试会话管理
- `GET /api/test-sessions` - 获取测试会话列表
- `POST /api/test-sessions` - 创建新测试会话
- `PUT /api/test-sessions/:id` - 更新测试会话
- `DELETE /api/test-sessions/:id` - 删除测试会话

### 测试记录管理
- `POST /api/test-records` - 添加测试记录
- `GET /api/test-records/:sessionId` - 获取会话测试记录
- `GET /api/test-stats/:sessionId` - 获取测试统计数据

### 数据导出
- `GET /api/export/:sessionId` - 导出测试数据

### 系统设置
- `GET /api/settings` - 获取系统设置
- `POST /api/settings` - 保存系统设置

### 健康检查
- `GET /api/health` - 系统健康状态

## 数据格式

### 测试记录格式
```json
{
  "sessionId": "test-001",
  "attemptNumber": 1,
  "timestamp": "2024-01-15T10:30:00Z",
  "action": "unlock",
  "result": "success",
  "responseTime": 85,
  "errorMessage": null,
  "componentStatus": "normal"
}
```

### 组件健康数据
```json
{
  "componentName": "电机",
  "healthScore": 78,
  "status": "warning",
  "lastMaintenance": "2024-01-10",
  "notes": "建议进行润滑维护"
}
```

## 维护建议

### 定期维护
- **每1000次使用**：检查机械结构润滑
- **每5000次使用**：全面检查电机和传感器
- **每10000次使用**：更换易损件

### 性能监控
- 响应时间超过150ms时需要关注
- 连续失败5次以上需要立即检查
- 成功率低于95%时建议维护

### 数据备份
- 建议每24小时自动备份测试数据
- 重要测试数据应导出到外部存储
- 定期清理90天以上的历史数据

## 故障排除

### 常见问题

**Q: 测试无法启动**
A: 检查智能锁连接状态和配置参数

**Q: 数据丢失**
A: 检查数据库文件完整性，恢复备份数据

**Q: 响应时间异常**
A: 检查网络连接和硬件状态

**Q: 导出功能异常**
A: 检查磁盘空间和文件权限

### 日志查看
- 前端日志：浏览器开发者工具控制台
- 后端日志：服务器控制台输出
- 数据库日志：data/endurance_test.db

## 贡献指南

欢迎提交Issue和Pull Request来改进这个项目。

### 开发环境设置
1. Fork 项目仓库
2. 创建功能分支
3. 提交更改
4. 创建Pull Request

### 代码规范
- 使用ESLint进行代码检查
- 遵循React最佳实践
- 添加适当的注释和文档

## 许可证

MIT License - 详见 LICENSE 文件

## 联系方式

如有问题或建议，请通过以下方式联系：
- 项目Issues：提交技术问题
- 邮箱：support@example.com

---

**智能锁测损功能测试系统** - 专业、可靠、易用的智能锁耐久性测试解决方案